apply plugin: "sonar-runner"

if(hasProperty("configureSonarRunner")) {
    configureSonarRunner()
}

subprojects {
    sonarRunner {
        sonarProperties {
            property "sonar.sourceEncoding", "UTF-8"
        }
    }
}

sonarRunner {
    sonarProperties {
        property "sonar.jacoco.reportPath", "${project.buildDir}/jacoco/test.exec"
    }
}

buildscript {
    repositories { mavenCentral() }    
    dependencies { classpath 'org.ajoberstar:gradle-jacoco:0.1.0' }
}


gradle.allprojects {
    applyJava = applyJava << {
        apply plugin: 'jacoco'
    }
}

// All sonar properties are given on a command line